{% extends 'base.html' %}
{% block title %}Owner Dashboard | SmartStay{% endblock %}
{% block content %}
<div class="container py-5">
  <h2 class="mb-4">My Dashboard</h2>
  <h4 class="mb-3">My Listings</h4>
  <table class="table table-bordered table-striped mb-5">
    <thead><tr><th>Name</th><th>City</th><th>Type</th><th>Price (â‚¹)</th></tr></thead>
    <tbody>
      {% for pg in listings %}
      <tr><td>{{ pg.name }}</td><td>{{ pg.city }}</td><td>{{ pg.sharing_type }}</td><td>{{ pg.price }}</td></tr>
      {% else %}<tr><td colspan="4">No listings found.</td></tr>{% endfor %}
    </tbody>
  </table>
  <h4 class="mb-3">Bookings</h4>
  <table class="table table-bordered table-striped mb-5">
    <thead><tr><th>Property</th><th>Name</th><th>Email</th><th>Phone</th><th>Move-in</th><th>Time</th></tr></thead>
    <tbody>
      {% for b in bookings %}
      <tr><td>{{ b.pg_id }}</td><td>{{ b.name }}</td><td>{{ b.email }}</td><td>{{ b.phone }}</td><td>{{ b.move_in }}</td><td>{{ b.timestamp.strftime('%d-%b-%Y %I:%M %p') }}</td></tr>
      {% else %}<tr><td colspan="6">No bookings yet.</td></tr>{% endfor %}
    </tbody>
  </table>
  <h4 class="mb-3">Contact Messages</h4>
  <table class="table table-bordered table-striped">
    <thead><tr><th>Property</th><th>Name</th><th>Email</th><th>Message</th><th>Time</th></tr></thead>
    <tbody>
      {% for m in messages %}
      <tr><td>{{ m.pg_id }}</td><td>{{ m.name }}</td><td>{{ m.email }}</td><td>{{ m.message }}</td><td>{{ m.timestamp.strftime('%d-%b-%Y %I:%M %p') }}</td></tr>
      {% else %}<tr><td colspan="5">No messages yet.</td></tr>{% endfor %}
    </tbody>
  </table>
</div>
{% endblock %} 